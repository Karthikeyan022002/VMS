<div class="forgot-password-center-box">
  <div class="forgot-password-card">
    <div *ngIf="step === 1">
      <h2>Forgot Password</h2>
      <form [formGroup]="emailForm" (ngSubmit)="sendToken()">
        <input type="email" formControlName="email" placeholder="Enter your email" [class.invalid]="emailForm.get('email')?.invalid && (emailForm.get('email')?.touched || emailForm.get('email')?.dirty)" />
        <div *ngIf="emailForm.get('email')?.invalid && (emailForm.get('email')?.touched || emailForm.get('email')?.dirty)" class="error">
          <small *ngIf="emailForm.get('email')?.errors?.['required']">Email is required.</small>
          <small *ngIf="emailForm.get('email')?.errors?.['email']">Enter a valid email.</small>
        </div>
        <button type="submit" [disabled]="isSubmitting">Send Reset Token</button>
      </form>
    </div>
     
    <div *ngIf="step === 2">
      <h2>Reset Password</h2>
      <form [formGroup]="resetForm" (ngSubmit)="resetPassword()">
        <input type="email" formControlName="email" readonly />
        <input type="text" formControlName="token" placeholder="Enter token" [class.invalid]="resetForm.get('token')?.invalid && (resetForm.get('token')?.touched || resetForm.get('token')?.dirty)" />
        <div *ngIf="resetForm.get('token')?.invalid && (resetForm.get('token')?.touched || resetForm.get('token')?.dirty)" class="error">
          <small>Token is required.</small>
        </div>
        <input type="password" formControlName="newPassword" placeholder="New Password" [class.invalid]="resetForm.get('newPassword')?.invalid && (resetForm.get('newPassword')?.touched || resetForm.get('newPassword')?.dirty)" />
        <div *ngIf="resetForm.get('newPassword')?.invalid && (resetForm.get('newPassword')?.touched || resetForm.get('newPassword')?.dirty)" class="error">
          <small *ngIf="resetForm.get('newPassword')?.errors?.['required']">Password is required.</small>
          <small *ngIf="resetForm.get('newPassword')?.errors?.['minlength']">Password must be at least 6 characters.</small>
        </div>
        <button type="submit" [disabled]="isSubmitting">Reset Password</button>
      </form>
    </div>
     
    <p>{{ message }}</p>
  </div>
</div>
