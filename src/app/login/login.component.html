<div class="vh-100 d-flex justify-content-center align-items-center bg-light">
  <div class="login-border-wrapper w-100" style="max-width: 460px;">
    <div class="card p-4 shadow-lg">

      <h2 class="text-center text-primary fw-bold mb-3">{{ loginRole === 'Admin' ? 'Admin Login' : 'User Login' }}</h2>

 


   
      <form (ngSubmit)="onLogin()" #loginForm="ngForm">
        
        <div class="form-group mb-3">
          <label class="form-label fw-medium">Email address</label>
          <input type="email" class="form-control custom-input" [(ngModel)]="loginEmail" name="loginEmail" required pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" #emailRef="ngModel" />
          <div *ngIf="emailRef.invalid && emailRef.touched" class="invalid-feedback d-block">
            <small *ngIf="emailRef.errors?.['required']">Email is required</small>
            <small *ngIf="emailRef.errors?.['pattern']">Enter a valid email address</small>
          </div>
        </div>

        
        <div class="form-group mb-3">
          <label class="form-label fw-medium">Password</label>
          <div class="input-group">
            <input [type]="showPassword ? 'text' : 'password'" class="form-control custom-input" [(ngModel)]="loginPassword" name="loginPassword" required #passwordRef="ngModel" />
            <button type="button" class="btn btn-outline-secondary" (click)="showPassword = !showPassword" tabindex="-1" aria-label="Show/Hide Password">
              <span [ngClass]="showPassword ? 'fa fa-eye-slash' : 'fa fa-eye'" aria-hidden="true"></span>
            </button>
          </div>
          <div *ngIf="passwordRef.touched && !loginPassword" class="invalid-feedback d-block">
            <small>Password is required</small>
          </div>
          <!-- <div *ngIf="passwordRef.touched && loginPassword && passwordRef.invalid && loginPassword !== registrationPassword" class="invalid-feedback d-block">
            <small *ngIf="passwordRef.errors?.['minlength']">Minimum 8 characters</small>
            <small *ngIf="passwordRef.errors?.['pattern']">
              Password must contain at least 1 letter, 1 number, and 1 special character
            </small>
          </div> -->
        </div>

       
        <div class="form-group mb-3">
          <label class="form-label fw-medium">CAPTCHA</label>
          <div class="d-flex mb-2">
            <input type="text" class="form-control text-center" style="width: 50%; margin-right: 0.5rem;" [value]="captchaCode" disabled />
            <input type="text" [(ngModel)]="userCaptcha" name="userCaptcha" class="form-control text-center" style="width: 50%;" maxlength="6" required pattern="[A-Za-z0-9]{6}" />
          </div>
          <div class="d-flex mb-2">
            <button type="button" class="btn btn-outline-info btn-sm w-50" style="margin-right: 0.5rem;" (click)="generateCaptcha()">
              Refresh CAPTCHA
            </button>
            <button type="button" class="btn btn-outline-success btn-sm w-50" (click)="verifyCaptcha()" [disabled]="!userCaptcha">
              Verify CAPTCHA
            </button>
          </div>
          <div *ngIf="captchaStatus" class="mt-2 small fw-semibold text-center"
               [ngClass]="{'text-success': captchaStatus === 'valid', 'text-danger': captchaStatus === 'invalid'}">
            {{ captchaStatus === 'valid' ? 'CAPTCHA verified successfully' : 'CAPTCHA does not match' }}
          </div>
        </div>

        
        <div class="text-end mb-3">
          <a href="/forgot-password" class="text-decoration-none small fw-medium text-primary">Forgot password?</a>
        </div>

        
        <button type="submit" class="btn btn-primary w-100 btn-hover" [disabled]="!loginForm.valid || captchaStatus !== 'valid'">
          Login as {{ loginRole === 'Admin' ? 'Admin ' : 'User ' }}
        </button>
        <div class="text-center mt-3" *ngIf="loginRole !== 'Admin'">
          <a href="/register" class="fw-medium text-secondary">Donâ€™t have an account? Sign up</a>
        </div>
      </form>

     
      <div *ngIf="loginMessage" class="mt-3 text-center fw-bold" [ngClass]="'text-' + loginMessageColor">
        {{ loginMessage }}
      </div>

    </div>
  </div>
</div>



